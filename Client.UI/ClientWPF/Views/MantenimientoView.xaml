<Window x:Class="ClientWPF.Views.MantenimientoView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Gestión de Mantenimiento" Height="700" Width="1100"
        WindowStartupLocation="CenterScreen"
        WindowStyle="None" AllowsTransparency="True" Background="Transparent"
        ResizeMode="CanResize"
        MouseDown="Window_MouseDown">

    <Window.Resources>
        <!-- 1) BRUSHES BASE -->
        <SolidColorBrush x:Key="SurfaceBrush" Color="#F2F0E9"/>
        <SolidColorBrush x:Key="PrimaryTextBrush" Color="#023E38"/>
        <SolidColorBrush x:Key="AccentBrush" Color="#D92027"/>
        <SolidColorBrush x:Key="WhiteBrush" Color="#FFFFFF"/>
        <SolidColorBrush x:Key="LightHoverBrush" Color="#15023E38"/>
        <SolidColorBrush x:Key="DangerBrush" Color="#FF6B6B"/>
        <SolidColorBrush x:Key="HeaderBgBrush" Color="#023E38"/>

        <LinearGradientBrush x:Key="BackgroundGradient" StartPoint="0,0" EndPoint="1,1">
            <GradientStop Color="#023E38" Offset="0.0"/>
            <GradientStop Color="#012925" Offset="1.0"/>
        </LinearGradientBrush>

        <!-- 2) ESTILOS INPUT / LABEL / BOTONES / GRIDS -->
        <Style x:Key="SquareInputStyle" TargetType="Border">
            <Setter Property="CornerRadius" Value="4"/>
            <Setter Property="Background" Value="#FFFFFF"/>
            <Setter Property="Height" Value="40"/>
            <Setter Property="BorderBrush" Value="#40023E38"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="5"/>
        </Style>

        <Style x:Key="InputLabel" TargetType="TextBlock">
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Foreground" Value="{StaticResource PrimaryTextBrush}"/>
            <Setter Property="Margin" Value="2,0,0,4"/>
            <Setter Property="VerticalAlignment" Value="Bottom"/>
        </Style>

        <Style x:Key="SquarePrimaryButton" TargetType="Button">
            <Setter Property="Background" Value="{StaticResource AccentBrush}"/>
            <Setter Property="Foreground" Value="{StaticResource SurfaceBrush}"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Height" Value="40"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" CornerRadius="4" Background="{TemplateBinding Background}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#B91B21"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="border" Property="RenderTransform">
                                    <Setter.Value>
                                        <ScaleTransform ScaleX="0.98" ScaleY="0.98" CenterX="50" CenterY="20"/>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="SquareSecondaryButton" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="{StaticResource PrimaryTextBrush}"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Height" Value="40"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="BorderBrush" Value="{StaticResource PrimaryTextBrush}"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" CornerRadius="4" Background="{TemplateBinding Background}" BorderThickness="1" BorderBrush="{StaticResource PrimaryTextBrush}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="{StaticResource LightHoverBrush}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="GridActionButton" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Width" Value="30"/>
            <Setter Property="Height" Value="30"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="bdr" Background="Transparent" CornerRadius="4">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="bdr" Property="Background" Value="#20000000"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style TargetType="DataGrid">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="RowHeaderWidth" Value="0"/>
            <Setter Property="GridLinesVisibility" Value="Horizontal"/>
            <Setter Property="HorizontalGridLinesBrush" Value="#20023E38"/>
            <Setter Property="VerticalGridLinesBrush" Value="Transparent"/>
            <Setter Property="AutoGenerateColumns" Value="False"/>
            <Setter Property="CanUserAddRows" Value="False"/>
            <Setter Property="IsReadOnly" Value="True"/>
            <Setter Property="HeadersVisibility" Value="Column"/>
            <Setter Property="RowHeight" Value="35"/>
            <Setter Property="ColumnHeaderStyle">
                <Setter.Value>
                    <Style TargetType="DataGridColumnHeader">
                        <Setter Property="Background" Value="Transparent"/>
                        <Setter Property="Foreground" Value="{StaticResource PrimaryTextBrush}"/>
                        <Setter Property="FontWeight" Value="Bold"/>
                        <Setter Property="Padding" Value="10,10"/>
                        <Setter Property="BorderThickness" Value="0,0,0,2"/>
                        <Setter Property="BorderBrush" Value="{StaticResource AccentBrush}"/>
                        <Setter Property="HorizontalContentAlignment" Value="Left"/>
                    </Style>
                </Setter.Value>
            </Setter>
            <Setter Property="CellStyle">
                <Setter.Value>
                    <Style TargetType="DataGridCell">
                        <Setter Property="Padding" Value="10,0"/>
                        <Setter Property="VerticalContentAlignment" Value="Center"/>
                        <Setter Property="Foreground" Value="#023E38"/>
                        <Setter Property="BorderThickness" Value="0"/>
                        <Style.Triggers>
                            <Trigger Property="IsSelected" Value="True">
                                <Setter Property="Foreground" Value="{StaticResource AccentBrush}"/>
                                <Setter Property="FontWeight" Value="Bold"/>
                                <Setter Property="Background" Value="Transparent"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="ReportDataGrid" TargetType="DataGrid" BasedOn="{StaticResource {x:Type DataGrid}}">
            <Setter Property="GridLinesVisibility" Value="None"/>
            <Setter Property="RowBackground" Value="White"/>
            <Setter Property="AlternatingRowBackground" Value="#F9F9F9"/>
            <Setter Property="ColumnHeaderStyle">
                <Setter.Value>
                    <Style TargetType="DataGridColumnHeader">
                        <Setter Property="Background" Value="{StaticResource HeaderBgBrush}"/>
                        <Setter Property="Foreground" Value="White"/>
                        <Setter Property="FontWeight" Value="Bold"/>
                        <Setter Property="Padding" Value="15,12"/>
                        <Setter Property="HorizontalContentAlignment" Value="Left"/>
                    </Style>
                </Setter.Value>
            </Setter>
            <Setter Property="CellStyle">
                <Setter.Value>
                    <Style TargetType="DataGridCell">
                        <Setter Property="Padding" Value="15,10"/>
                        <Setter Property="BorderThickness" Value="0"/>
                        <Setter Property="Foreground" Value="#333"/>
                    </Style>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- 3) ESTILOS TABCONTROL / TABITEM -->
        <Style TargetType="TabControl">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="0"/>
        </Style>

        <Style TargetType="TabItem">
            <Setter Property="Margin" Value="0,0,8,0"/>
            <Setter Property="Padding" Value="16,6"/>
            <Setter Property="Foreground" Value="{StaticResource PrimaryTextBrush}"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TabItem">
                        <Border x:Name="Bd"
                        CornerRadius="6,6,0,0"
                        Background="Transparent"
                        Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center"
                                      VerticalAlignment="Center"
                                      ContentSource="Header"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <!-- Seleccionada -->
                            <Trigger Property="IsSelected" Value="True">
                                <Setter TargetName="Bd" Property="Background" Value="{StaticResource AccentBrush}"/>
                                <Setter Property="Foreground" Value="{StaticResource WhiteBrush}"/>
                            </Trigger>

                            <!-- Hover SOLO cuando NO está seleccionada -->
                            <MultiTrigger>
                                <MultiTrigger.Conditions>
                                    <Condition Property="IsMouseOver" Value="True"/>
                                    <Condition Property="IsSelected" Value="False"/>
                                </MultiTrigger.Conditions>
                                <Setter TargetName="Bd" Property="Background" Value="{StaticResource LightHoverBrush}"/>
                            </MultiTrigger>

                            <!-- Deshabilitada -->
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter Property="Foreground" Value="#80023E38"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

    </Window.Resources>

    <Border Background="{StaticResource BackgroundGradient}">
        <Border Background="{StaticResource SurfaceBrush}" CornerRadius="12" Margin="20">
            <Border.Effect>
                <DropShadowEffect Color="#000000" BlurRadius="20" ShadowDepth="5" Opacity="0.3"/>
            </Border.Effect>

            <Grid Margin="25">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <!-- HEADER -->
                <Grid Grid.Row="0" Margin="0,0,0,20">
                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                        <TextBlock Text="MÓDULO DE MANTENIMIENTO"
                                   FontSize="24"
                                   FontWeight="Black"
                                   Foreground="{StaticResource PrimaryTextBrush}"
                                   VerticalAlignment="Center"/>
                    </StackPanel>

                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                        <Button Click="BtnRecargar_Click" Style="{StaticResource GridActionButton}" ToolTip="Recargar">
                            <Path Data="M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z"
                                  Fill="{StaticResource PrimaryTextBrush}" Width="16" Height="16" Stretch="Uniform"/>
                        </Button>
                        <Button Click="BtnCerrar_Click" Style="{StaticResource GridActionButton}" Margin="5,0,0,0" ToolTip="Cerrar">
                            <Path Data="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"
                                  Fill="{StaticResource AccentBrush}" Width="14" Height="14" Stretch="Uniform"/>
                        </Button>
                    </StackPanel>
                </Grid>

                <!-- CONTENIDO PRINCIPAL -->
                <TabControl Grid.Row="1" Background="Transparent" BorderThickness="0">

                    <!-- TAB 1: REGISTRO -->
                    <TabItem Header="REGISTRO">
                        <Grid Margin="0,15,0,0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="320"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <!-- PANEL IZQUIERDO -->
                            <Border Grid.Column="0" Background="{StaticResource WhiteBrush}" CornerRadius="8"
                                    Margin="0,0,20,0" Padding="20" BorderBrush="#20000000" BorderThickness="1">
                                <StackPanel>
                                    <TextBlock Text="Datos Generales" FontSize="16" FontWeight="Bold"
                                               Foreground="{StaticResource AccentBrush}" Margin="0,0,0,15"/>

                                    <TextBlock Text="Fecha de Registro" Style="{StaticResource InputLabel}"/>
                                    <Border Style="{StaticResource SquareInputStyle}">
                                        <DatePicker x:Name="dpFecha" BorderThickness="0"
                                                    VerticalContentAlignment="Center" Background="Transparent"/>
                                    </Border>

                                    <TextBlock Text="Responsable / Técnico" Style="{StaticResource InputLabel}"/>
                                    <Border Style="{StaticResource SquareInputStyle}">
                                        <TextBox x:Name="txtResponsable" Background="Transparent" BorderThickness="0"
                                                 VerticalContentAlignment="Center" Padding="5,0"/>
                                    </Border>

                                    <Separator Background="#20000000" Margin="0,20,0,20"/>

                                    <TextBlock Text="Total Acumulado:"
                                               FontWeight="Bold"
                                               Foreground="{StaticResource PrimaryTextBrush}"/>
                                    <TextBlock x:Name="lblTotal"
                                               Text="$ 0.00"
                                               FontSize="32"
                                               FontWeight="Black"
                                               Foreground="{StaticResource PrimaryTextBrush}"
                                               Margin="0,5,0,0"/>

                                    <Button Content="GUARDAR TODO"
                                            Click="BtnGuardar_Click"
                                            Margin="0,30,0,0"
                                            Style="{StaticResource SquarePrimaryButton}"/>
                                </StackPanel>
                            </Border>

                            <!-- PANEL DERECHO -->
                            <Grid Grid.Column="1">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="*"/>
                                </Grid.RowDefinitions>

                                <!-- FORM DETALLE -->
                                <Border Grid.Row="0" Background="{StaticResource WhiteBrush}" CornerRadius="8"
                                        Padding="15" Margin="0,0,0,15"
                                        BorderBrush="#20000000" BorderThickness="1">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="2*"/>
                                            <ColumnDefinition Width="2*"/>
                                            <ColumnDefinition Width="1*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>

                                        <StackPanel Grid.Column="0" Margin="0,0,10,0">
                                            <TextBlock Text="Activo" Style="{StaticResource InputLabel}"/>
                                            <Border Style="{StaticResource SquareInputStyle}" Margin="0">
                                                <ComboBox x:Name="cboActivo" BorderThickness="0"
                                                          Background="Transparent"
                                                          VerticalContentAlignment="Center"/>
                                            </Border>
                                        </StackPanel>

                                        <StackPanel Grid.Column="1" Margin="0,0,10,0">
                                            <TextBlock Text="Actividad" Style="{StaticResource InputLabel}"/>
                                            <Border Style="{StaticResource SquareInputStyle}" Margin="0">
                                                <ComboBox x:Name="cboActividad" BorderThickness="0"
                                                          Background="Transparent"
                                                          VerticalContentAlignment="Center"/>
                                            </Border>
                                        </StackPanel>

                                        <StackPanel Grid.Column="2" Margin="0,0,10,0">
                                            <TextBlock Text="Costo Estimado ($)" Style="{StaticResource InputLabel}"/>
                                            <Border Style="{StaticResource SquareInputStyle}" Margin="0">
                                                <TextBox x:Name="txtCosto" Background="Transparent" BorderThickness="0"
                                                         VerticalContentAlignment="Center" Padding="5,0"/>
                                            </Border>
                                        </StackPanel>

                                        <Button Grid.Column="3"
                                                Click="BtnAgregar_Click"
                                                Width="40" Height="40"
                                                VerticalAlignment="Bottom"
                                                Style="{StaticResource SquarePrimaryButton}">
                                            <TextBlock Text="+" FontSize="20" FontWeight="Bold" Margin="0,-2,0,0"/>
                                        </Button>
                                    </Grid>
                                </Border>

                                <!-- GRID DETALLE -->
                                <Border Grid.Row="1" Background="Transparent" CornerRadius="8">
                                    <DataGrid x:Name="gridDetalle" AutoGenerateColumns="False">
                                        <DataGrid.Columns>
                                            <DataGridTextColumn Header="ACTIVO"
                                                                Binding="{Binding NombreActivo}" Width="*"/>
                                            <DataGridTextColumn Header="ACTIVIDAD"
                                                                Binding="{Binding NombreActividad}" Width="*"/>
                                            <DataGridTextColumn Header="COSTO"
                                                                Binding="{Binding Valor, StringFormat=C2}"
                                                                Width="100" FontWeight="Bold"/>
                                            <DataGridTemplateColumn Width="50">
                                                <DataGridTemplateColumn.CellTemplate>
                                                    <DataTemplate>
                                                        <Button Click="BtnQuitarDetalle_Click"
                                                                Style="{StaticResource GridActionButton}"
                                                                ToolTip="Quitar">
                                                            <Path Data="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z"
                                                                  Fill="{StaticResource DangerBrush}"
                                                                  Width="14" Height="14" Stretch="Uniform"/>
                                                        </Button>
                                                    </DataTemplate>
                                                </DataGridTemplateColumn.CellTemplate>
                                            </DataGridTemplateColumn>
                                        </DataGrid.Columns>
                                    </DataGrid>
                                </Border>
                            </Grid>
                        </Grid>
                    </TabItem>

                    <!-- TAB 2: CATÁLOGOS -->
                    <TabItem Header="CATÁLOGOS">
                        <Grid Margin="0,20,0,0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <!-- ACTIVIDADES -->
                            <Border Grid.Column="0" Background="{StaticResource WhiteBrush}" CornerRadius="8"
                                    Padding="20" Margin="0,0,10,0"
                                    BorderBrush="#20000000" BorderThickness="1">
                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="*"/>
                                    </Grid.RowDefinitions>

                                    <TextBlock Grid.Row="0"
                                               Text="Actividades"
                                               FontSize="16"
                                               FontWeight="Bold"
                                               Foreground="{StaticResource AccentBrush}"
                                               Margin="0,0,0,15"/>

                                    <StackPanel Grid.Row="1" Margin="0,0,0,10">
                                        <TextBlock Text="Buscar" Style="{StaticResource InputLabel}"/>
                                        <Border Style="{StaticResource SquareInputStyle}">
                                            <TextBox x:Name="txtBuscarActividad"
                                                     TextChanged="TxtBuscarActividad_TextChanged"
                                                     Background="Transparent"
                                                     BorderThickness="0"
                                                     VerticalContentAlignment="Center"/>
                                        </Border>
                                    </StackPanel>

                                    <Grid Grid.Row="2" Margin="0,0,0,15">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="80"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>

                                        <StackPanel Grid.Column="0" Margin="0,0,5,0">
                                            <TextBlock Text="Código" Style="{StaticResource InputLabel}"/>
                                            <Border Style="{StaticResource SquareInputStyle}" Margin="0">
                                                <TextBox x:Name="txtCodAct"
                                                         Background="Transparent"
                                                         BorderThickness="0"
                                                         VerticalContentAlignment="Center"
                                                         Padding="5,0"/>
                                            </Border>
                                        </StackPanel>

                                        <StackPanel Grid.Column="1" Margin="0,0,5,0">
                                            <TextBlock Text="Descripción" Style="{StaticResource InputLabel}"/>
                                            <Border Style="{StaticResource SquareInputStyle}" Margin="0">
                                                <TextBox x:Name="txtNomAct"
                                                         Background="Transparent"
                                                         BorderThickness="0"
                                                         VerticalContentAlignment="Center"
                                                         Padding="5,0"/>
                                            </Border>
                                        </StackPanel>

                                        <Button Grid.Column="2"
                                                Click="BtnNuevaActividad_Click"
                                                Width="35" Height="40"
                                                Margin="0,20,5,0"
                                                Style="{StaticResource SquareSecondaryButton}"
                                                ToolTip="Limpiar">
                                            <Path Data="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"
                                                  Fill="{StaticResource PrimaryTextBrush}"
                                                  Width="12" Height="12" Stretch="Uniform"/>
                                        </Button>

                                        <Button Grid.Column="3"
                                                Content="Guardar"
                                                Click="BtnGuardarActividad_Click"
                                                Width="80" Height="40"
                                                Margin="0,20,0,0"
                                                Style="{StaticResource SquarePrimaryButton}"/>
                                    </Grid>

                                    <DataGrid Grid.Row="3" x:Name="gridActividades">
                                        <DataGrid.Columns>
                                            <DataGridTextColumn Header="CÓD"
                                                                Binding="{Binding Id}"
                                                                Width="60" FontWeight="SemiBold"/>
                                            <DataGridTextColumn Header="DESCRIPCIÓN"
                                                                Binding="{Binding Descripcion}"
                                                                Width="*"/>
                                            <DataGridTemplateColumn Width="80" Header="ACCIONES">
                                                <DataGridTemplateColumn.CellTemplate>
                                                    <DataTemplate>
                                                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                                            <Button Click="BtnEditarActividad_Click"
                                                                    Style="{StaticResource GridActionButton}"
                                                                    Margin="0,0,5,0"
                                                                    ToolTip="Editar">
                                                                <Path Data="M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z"
                                                                      Fill="{StaticResource PrimaryTextBrush}"
                                                                      Width="14" Height="14" Stretch="Uniform"/>
                                                            </Button>
                                                            <Button Click="BtnEliminarActividad_Click"
                                                                    Style="{StaticResource GridActionButton}"
                                                                    ToolTip="Eliminar">
                                                                <Path Data="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z"
                                                                      Fill="{StaticResource DangerBrush}"
                                                                      Width="14" Height="14" Stretch="Uniform"/>
                                                            </Button>
                                                        </StackPanel>
                                                    </DataTemplate>
                                                </DataGridTemplateColumn.CellTemplate>
                                            </DataGridTemplateColumn>
                                        </DataGrid.Columns>
                                    </DataGrid>
                                </Grid>
                            </Border>

                            <!-- ACTIVOS -->
                            <Border Grid.Column="1" Background="{StaticResource WhiteBrush}" CornerRadius="8"
                                    Padding="20" Margin="10,0,0,0"
                                    BorderBrush="#20000000" BorderThickness="1">
                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="*"/>
                                    </Grid.RowDefinitions>

                                    <TextBlock Grid.Row="0"
                                               Text="Activos"
                                               FontSize="16"
                                               FontWeight="Bold"
                                               Foreground="{StaticResource PrimaryTextBrush}"
                                               Margin="0,0,0,15"/>

                                    <StackPanel Grid.Row="1" Margin="0,0,0,10">
                                        <TextBlock Text="Buscar" Style="{StaticResource InputLabel}"/>
                                        <Border Style="{StaticResource SquareInputStyle}">
                                            <TextBox x:Name="txtBuscarActivo"
                                                     TextChanged="TxtBuscarActivo_TextChanged"
                                                     Background="Transparent"
                                                     BorderThickness="0"
                                                     VerticalContentAlignment="Center"/>
                                        </Border>
                                    </StackPanel>

                                    <Grid Grid.Row="2" Margin="0,0,0,15">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="80"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>

                                        <StackPanel Grid.Column="0" Margin="0,0,5,0">
                                            <TextBlock Text="ID" Style="{StaticResource InputLabel}"/>
                                            <Border Style="{StaticResource SquareInputStyle}" Height="35" Margin="0">
                                                <TextBox x:Name="txtIdActivo"
                                                         Background="Transparent"
                                                         BorderThickness="0"
                                                         VerticalContentAlignment="Center"
                                                         Padding="5,0"/>
                                            </Border>
                                        </StackPanel>

                                        <StackPanel Grid.Column="1" Margin="0,0,5,0">
                                            <TextBlock Text="Nombre del Activo" Style="{StaticResource InputLabel}"/>
                                            <Border Style="{StaticResource SquareInputStyle}" Height="35" Margin="0">
                                                <TextBox x:Name="txtNomActivo"
                                                         Background="Transparent"
                                                         BorderThickness="0"
                                                         VerticalContentAlignment="Center"
                                                         Padding="5,0"/>
                                            </Border>
                                        </StackPanel>

                                        <Button Grid.Column="2"
                                                Click="BtnNuevoActivo_Click"
                                                Width="35" Height="35"
                                                Margin="0,20,5,0"
                                                Style="{StaticResource SquareSecondaryButton}"
                                                ToolTip="Limpiar">
                                            <Path Data="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"
                                                  Fill="{StaticResource PrimaryTextBrush}"
                                                  Width="12" Height="12" Stretch="Uniform"/>
                                        </Button>

                                        <Button Grid.Column="3"
                                                Content="Guardar"
                                                Click="BtnGuardarActivo_Click"
                                                Width="80" Height="35"
                                                Margin="0,20,0,0"
                                                Style="{StaticResource SquarePrimaryButton}"/>
                                    </Grid>

                                    <DataGrid Grid.Row="3" x:Name="gridActivos">
                                        <DataGrid.Columns>
                                            <DataGridTextColumn Header="ID"
                                                                Binding="{Binding Id}"
                                                                Width="60" FontWeight="SemiBold"/>
                                            <DataGridTextColumn Header="DESCRIPCIÓN"
                                                                Binding="{Binding Descripcion}"
                                                                Width="*"/>
                                            <DataGridTemplateColumn Width="80" Header="ACCIONES">
                                                <DataGridTemplateColumn.CellTemplate>
                                                    <DataTemplate>
                                                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                                            <Button Click="BtnEditarActivo_Click"
                                                                    Style="{StaticResource GridActionButton}"
                                                                    Margin="0,0,5,0"
                                                                    ToolTip="Editar">
                                                                <Path Data="M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z"
                                                                      Fill="{StaticResource PrimaryTextBrush}"
                                                                      Width="14" Height="14" Stretch="Uniform"/>
                                                            </Button>
                                                            <Button Click="BtnEliminarActivo_Click"
                                                                    Style="{StaticResource GridActionButton}"
                                                                    ToolTip="Eliminar">
                                                                <Path Data="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z"
                                                                      Fill="{StaticResource DangerBrush}"
                                                                      Width="14" Height="14" Stretch="Uniform"/>
                                                            </Button>
                                                        </StackPanel>
                                                    </DataTemplate>
                                                </DataGridTemplateColumn.CellTemplate>
                                            </DataGridTemplateColumn>
                                        </DataGrid.Columns>
                                    </DataGrid>
                                </Grid>
                            </Border>
                        </Grid>
                    </TabItem>

                    <!-- TAB 3: REPORTES -->
                    <TabItem Header="REPORTES">
                        <Grid Margin="0,20,0,0">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>

                            <Border Grid.Row="0" Background="{StaticResource WhiteBrush}" CornerRadius="8"
                                    Padding="15" Margin="0,0,0,20"
                                    BorderBrush="#20000000" BorderThickness="1">
                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                    <TextBlock Text="📅 Rango:" VerticalAlignment="Center"
                                               FontWeight="Bold"
                                               Foreground="{StaticResource PrimaryTextBrush}"
                                               Margin="0,0,15,0"/>

                                    <TextBlock Text="Desde" VerticalAlignment="Center" Margin="0,0,5,0"/>
                                    <Border Style="{StaticResource SquareInputStyle}" Width="140" Margin="0">
                                        <DatePicker x:Name="dpDesde" BorderThickness="0"
                                                    VerticalContentAlignment="Center"/>
                                    </Border>

                                    <TextBlock Text="Hasta" VerticalAlignment="Center" Margin="15,0,5,0"/>
                                    <Border Style="{StaticResource SquareInputStyle}" Width="140" Margin="0">
                                        <DatePicker x:Name="dpHasta" BorderThickness="0"
                                                    VerticalContentAlignment="Center"/>
                                    </Border>

                                    <Button Content="Ver Gastos por Activo"
                                            Click="BtnRepGastos_Click"
                                            Width="180" Height="40"
                                            Margin="30,0,10,0"
                                            Style="{StaticResource SquarePrimaryButton}"/>
                                    <Button Content="Ver Matriz Cruzada"
                                            Click="BtnRepMatriz_Click"
                                            Width="180" Height="40"
                                            Style="{StaticResource SquarePrimaryButton}"/>
                                </StackPanel>
                            </Border>

                            <Border Grid.Row="1" Background="{StaticResource WhiteBrush}" CornerRadius="8"
                                    Padding="10" BorderBrush="#20000000" BorderThickness="1">
                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="*"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>

                                    <DataGrid Grid.Row="0"
                                              x:Name="gridReportes"
                                              Style="{StaticResource ReportDataGrid}"
                                              AutoGenerateColumns="True"/>

                                    <Button Grid.Row="1"
                                            Content="📂 Exportar a Excel (CSV)"
                                            Click="BtnExportar_Click"
                                            HorizontalAlignment="Right"
                                            Margin="0,15,0,0"
                                            Width="220"
                                            Style="{StaticResource SquarePrimaryButton}"/>
                                </Grid>
                            </Border>
                        </Grid>
                    </TabItem>
                </TabControl>
            </Grid>
        </Border>
    </Border>
</Window>
